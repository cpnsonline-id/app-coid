{"version":3,"sources":["webpack:///./src/views/admin/data-categories/components/modal-form-category.vue?a667","webpack:///./src/views/admin/data-categories/components/modal-form-category.vue","webpack:///./src/views/admin/data-categories/components/modal-form-category.vue?7fee"],"names":["_hoisted_1","class","_hoisted_2","render","_ctx","_cache","$props","$setup","$data","$options","_component_TextField","_resolveComponent","_component_SingleImageUpload","_component_RadioGroup","_component_ModalTemplate","_openBlock","_createBlock","modalId","title","titleForm","size","content","_withCtx","_createElementVNode","_createVNode","value","form","kode","$event","label","type","placeholder","banner","file","fileUrl","accept","items","listStatus","isActive","buttons","onClick","args","onCancelClick","onSaveClick","_toDisplayString","isEditPage","_","ModalTemplate","defineAsyncComponent","TextField","SingleImageUpload","RadioGroup","servicesV1AdminLearningCategories","async","defineComponent","props","showFormCategory","Boolean","default","categoryId","Number","categoryCode","String","components","setup","emit","computed","text","hideFormCategory","resetForm","watch","newVal","console","log","gpf","showModal","onHideModal","reactive","getDetailCategory","getAdminLearningCategoryById","gLoading","show","hit","nextTick","resData","response","err","handleEds","hide","hideModal","hitEditCategory","hitAddCategory","afterClickSaveCategory","postAdminLearningCategory","body","FormData","append","popupStatus","message","error","errData","data","messageErr","diagnostic","putAdminLearningCategory","fileBanner","__exports__"],"mappings":"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","file":"js/chunk-2d21aeaf.86925aa0.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"flex flex-col\" }\nconst _hoisted_2 = { class: \"flex flex-row justify-end\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_TextField = _resolveComponent(\"TextField\")!\n  const _component_SingleImageUpload = _resolveComponent(\"SingleImageUpload\")!\n  const _component_RadioGroup = _resolveComponent(\"RadioGroup\")!\n  const _component_ModalTemplate = _resolveComponent(\"ModalTemplate\")!\n\n  return (_openBlock(), _createBlock(_component_ModalTemplate, {\n    \"modal-id\": _ctx.modalId,\n    title: _ctx.titleForm,\n    size: \"xl\"\n  }, {\n    content: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createVNode(_component_TextField, {\n          value: _ctx.form.kode,\n          \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.form.kode) = $event)),\n          label: \"Kode\",\n          type: \"text\",\n          placeholder: \"Masukkan kode\",\n          class: \"w-full mb-4\"\n        }, null, 8, [\"value\"]),\n        _createVNode(_component_TextField, {\n          value: _ctx.form.title,\n          \"onUpdate:value\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.form.title) = $event)),\n          label: \"Title\",\n          type: \"text\",\n          placeholder: \"Masukkan title\",\n          class: \"w-full mb-4\"\n        }, null, 8, [\"value\"]),\n        _createVNode(_component_SingleImageUpload, {\n          label: \"Banner\",\n          value: _ctx.form.banner.file,\n          \"onUpdate:value\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.form.banner.file) = $event)),\n          \"file-url\": _ctx.form.banner.fileUrl,\n          \"unique-id\": \"ImageBanner\",\n          accept: \".png, .jpg, .jpeg, .svg\",\n          class: \"mb-4\"\n        }, null, 8, [\"value\", \"file-url\"]),\n        _createVNode(_component_RadioGroup, {\n          label: \"Status\",\n          items: _ctx.listStatus,\n          value: _ctx.form.isActive,\n          \"onUpdate:value\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.form.isActive) = $event)),\n          \"unique-id\": \"FieldStatus\"\n        }, null, 8, [\"items\", \"value\"])\n      ])\n    ]),\n    buttons: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"button\", {\n          type: \"button\",\n          class: \"button w-20 bg-theme-6 text-white mr-2\",\n          onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.onCancelClick && _ctx.onCancelClick(...args)))\n        }, \" Batal \"),\n        _createElementVNode(\"button\", {\n          type: \"button\",\n          class: \"button w-20 bg-theme-1 text-white\",\n          onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_ctx.onSaveClick && _ctx.onSaveClick(...args)))\n        }, _toDisplayString(_ctx.isEditPage ? \"Perbarui\" : \"Simpan\"), 1)\n      ])\n    ]),\n    _: 1\n  }, 8, [\"modal-id\", \"title\"]))\n}","\nimport { gpf } from \"@/utils/global-functions\";\nimport { popupStatus } from \"@/utils/popup/status\";\nimport {\n  computed,\n  defineAsyncComponent,\n  defineComponent,\n  nextTick,\n  reactive,\n  watch,\n} from \"vue\";\n\nconst ModalTemplate = defineAsyncComponent(\n  () => import(`@/components/modal-template/Main.vue`)\n);\n\nconst TextField = defineAsyncComponent(\n  () => import(`@/global-components/input/text-field/Main.vue`)\n);\n\nconst SingleImageUpload = defineAsyncComponent(\n  () => import(`@/global-components/input/single-image-upload/Main.vue`)\n);\n\nconst RadioGroup = defineAsyncComponent(\n  () => import(`@/global-components/input/radio-group/Main.vue`)\n);\n\nconst servicesV1AdminLearningCategories = async () =>\n  import(`@/services/v1/admin/learning/categories`);\n\nexport default defineComponent({\n  props: {\n    showFormCategory: {\n      type: Boolean,\n      default: false,\n    },\n    categoryId: {\n      type: Number,\n      default: 0,\n    },\n    categoryCode: {\n      type: String,\n      default: \"\",\n    },\n  },\n  components: {\n    ModalTemplate,\n    TextField,\n    SingleImageUpload,\n    RadioGroup,\n  },\n  setup(props, { emit }) {\n    // START === Constant variable ===============================================\n    const modalId = \"modal-form-category\";\n    const categoryId = computed(() => props.categoryId);\n    const categoryCode = computed(() => props.categoryCode);\n    const isEditPage = computed(() => !!categoryCode.value);\n\n    const titleForm = computed(() =>\n      isEditPage.value ? \"Form Edit Kategori\" : \"Form Add Kategori\"\n    );\n\n    const listStatus = [\n      {\n        text: \"Active\",\n        value: \"1\",\n      },\n      {\n        text: \"Inactive\",\n        value: \"0\",\n      },\n    ];\n\n    // END === Constant variable =================================================\n\n    // START === for handle show hide modal form category ====================================\n    const hideFormCategory = () => {\n      resetForm();\n\n      emit(\"update:show-form-category\", false);\n      emit(\"update:category-id\", 0);\n      emit(\"update:category-code\", \"\");\n    };\n\n    watch(\n      () => props.showFormCategory,\n      (newVal) => {\n        console.log(\"props.showFormCategory newVal \", props);\n\n        if (newVal) gpf.showModal(`#${modalId}`);\n        gpf.onHideModal(`#${modalId}`, hideFormCategory);\n      }\n    );\n    // END === for handle show hide modal form category ======================================\n\n    // START === Form Data =================================================================\n    const form = reactive({\n      kode: \"\",\n      title: \"\",\n      banner: {\n        file: \"\",\n        fileUrl: \"\",\n      },\n      isActive: \"0\",\n    });\n\n    const resetForm = () => {\n      form.kode = \"\";\n      form.title = \"\";\n      form.banner = {\n        file: \"\",\n        fileUrl: \"\",\n      };\n      form.isActive = \"0\";\n    };\n\n    // END === Form Data =================================================================\n\n    // START === Functions handle get detail category ==========================================\n    const getDetailCategory = async () => {\n      const {\n        getAdminLearningCategoryById,\n      } = await servicesV1AdminLearningCategories();\n\n      gpf.gLoading.show();\n\n      try {\n        const hit = await getAdminLearningCategoryById(categoryCode.value);\n\n        await nextTick();\n\n        const resData = hit.response;\n        console.log(\"resData getDetailCategory \", resData);\n\n        form.kode = resData.kode;\n        form.title = resData.title;\n        form.banner.fileUrl = resData.banner;\n        form.isActive = resData.isActive ? \"1\" : \"0\";\n\n        console.log(\"form \", form);\n      } catch (err: any) {\n        console.log(\"err response getDetailCategory \", err, err?.response);\n\n        gpf.handleEds(err);\n      } finally {\n        gpf.gLoading.hide();\n      }\n    };\n\n    watch(\n      () => isEditPage.value,\n      (newVal) => {\n        console.log(\"newVal isEditPage.value \", newVal);\n\n        if (newVal) getDetailCategory();\n      }\n    );\n    // END === Functions handle get detail category ============================================\n\n    // START === Function actions =========================================================\n    const onCancelClick = () => gpf.hideModal(`#${modalId}`);\n\n    const onSaveClick = () => {\n      console.log(\"category ID \", categoryId.value);\n      console.log(\"category Slug \", categoryCode.value);\n\n      if (isEditPage.value) {\n        hitEditCategory();\n      } else {\n        hitAddCategory();\n      }\n    };\n\n    const afterClickSaveCategory = () => {\n      gpf.hideModal(`#${modalId}`);\n      emit(\"update:refetch\", true);\n    };\n\n    const hitAddCategory = async () => {\n      const {\n        postAdminLearningCategory,\n      } = await servicesV1AdminLearningCategories();\n\n      gpf.gLoading.show();\n\n      const body = new FormData();\n      body.append(\"kode\", form.kode);\n      body.append(\"title\", form.title);\n      body.append(\"banner\", form.banner.file);\n      body.append(\"isActive\", form.isActive === \"1\" ? \"1\" : \"0\");\n\n      try {\n        await postAdminLearningCategory(body);\n\n        popupStatus({\n          type: \"s\",\n          message: \"Successfully Created Kategori\",\n        }).show();\n\n        afterClickSaveCategory();\n      } catch (err: any) {\n        console.error(\"err hitAddCategory \", err, err?.response);\n\n        const errData = err?.response?.data;\n        const messageErr = errData?.diagnostic?.message;\n\n        popupStatus({\n          type: \"f\",\n          message: messageErr,\n        }).show();\n      } finally {\n        gpf.gLoading.hide();\n      }\n    };\n\n    const hitEditCategory = async () => {\n      const {\n        putAdminLearningCategory,\n      } = await servicesV1AdminLearningCategories();\n\n      gpf.gLoading.show();\n\n      const body = new FormData();\n      body.append(\"kode\", form.kode);\n      body.append(\"title\", form.title);\n\n      const fileBanner = form.banner.file;\n      if (fileBanner) {\n        body.append(\"banner\", fileBanner);\n      } else {\n        body.append(\"banner\", \"\");\n      }\n\n      body.append(\"isActive\", form.isActive === \"1\" ? \"1\" : \"0\");\n\n      try {\n        await putAdminLearningCategory(categoryCode.value, body);\n\n        popupStatus({\n          type: \"s\",\n          message: \"Successfully Updated Kategori\",\n        }).show();\n\n        afterClickSaveCategory();\n      } catch (err: any) {\n        console.error(\"err hitEditCategory \", err, err?.response);\n\n        const errData = err?.response?.data;\n        const messageErr = errData?.diagnostic?.message;\n\n        popupStatus({\n          type: \"f\",\n          message: messageErr,\n        }).show();\n      } finally {\n        gpf.gLoading.hide();\n      }\n    };\n    // END === Function actions ===========================================================\n\n    return {\n      modalId,\n      isEditPage,\n      titleForm,\n      listStatus,\n      form,\n\n      onCancelClick,\n      onSaveClick,\n    };\n  },\n});\n","import { render } from \"./modal-form-category.vue?vue&type=template&id=e8365da4&ts=true\"\nimport script from \"./modal-form-category.vue?vue&type=script&lang=ts\"\nexport * from \"./modal-form-category.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/nasrullahid/Project/cpnsonline.id/fe-coid/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}