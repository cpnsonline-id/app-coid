(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a5502"],{"09be":function(e,t,o){"use strict";o.r(t);var l=o("7a23");const n={class:"flex flex-col"},i={class:"flex flex-col mb-4 full"},a=Object(l["h"])("label",{class:"w-full text-sm mb-1 font-semibold"},"Content :",-1),c={class:"flex flex-row justify-end"};function d(e,t,o,d,s,r){const u=Object(l["J"])("TextField"),p=Object(l["J"])("SingleImageUpload"),b=Object(l["J"])("RadioGroup"),v=Object(l["J"])("TextArea"),m=Object(l["J"])("SingleFileUpload"),f=Object(l["J"])("Autocomplete"),g=Object(l["J"])("ModalTemplate");return Object(l["B"])(),Object(l["e"])(g,{"modal-id":e.modalId,title:e.titleForm,size:"xl"},{content:Object(l["V"])(()=>[Object(l["h"])("div",n,[Object(l["k"])(u,{value:e.form.title,"onUpdate:value":t[0]||(t[0]=t=>e.form.title=t),label:"Title",type:"text",placeholder:"Masukkan title",class:"w-full mb-4"},null,8,["value"]),Object(l["k"])(p,{label:"Banner",value:e.form.banner.file,"onUpdate:value":t[1]||(t[1]=t=>e.form.banner.file=t),"file-url":e.form.banner.fileUrl,"unique-id":"ImageBanner",accept:".png, .jpg, .jpeg, .svg",class:"mb-4"},null,8,["value","file-url"]),Object(l["k"])(b,{label:"Tipe",items:e.filterTypes,value:e.form.types,"onUpdate:value":t[2]||(t[2]=t=>e.form.types=t),class:"mb-4","unique-id":"FieldTipe"},null,8,["items","value"]),Object(l["h"])("div",i,[a,"video"===e.form.types?(Object(l["B"])(),Object(l["e"])(v,{key:0,value:e.form.contentVideo,"onUpdate:value":t[3]||(t[3]=t=>e.form.contentVideo=t),placeholder:"Masukkan konten"},null,8,["value"])):Object(l["f"])("",!0),"ebook"===e.form.types?(Object(l["B"])(),Object(l["e"])(m,{key:1,value:e.form.content.file,"onUpdate:value":t[4]||(t[4]=t=>e.form.content.file=t),"file-url":e.form.content.fileUrl,"unique-id":"FileContent",accept:".pdf"},null,8,["value","file-url"])):Object(l["f"])("",!0)]),Object(l["k"])(f,{value:e.form.category,"onUpdate:value":t[5]||(t[5]=t=>e.form.category=t),label:"Kategori",items:e.categories,class:"w-full mb-4"},null,8,["value","items"]),Object(l["k"])(f,{value:e.form.topic,"onUpdate:value":t[6]||(t[6]=t=>e.form.topic=t),label:"Topik",items:e.prettierTopicsFromCategory,class:"w-full mb-4"},null,8,["value","items"]),Object(l["k"])(b,{label:"Status",items:e.listStatus,value:e.form.isActive,"onUpdate:value":t[7]||(t[7]=t=>e.form.isActive=t),"unique-id":"FieldStatus"},null,8,["items","value"])])]),buttons:Object(l["V"])(()=>[Object(l["h"])("div",c,[Object(l["h"])("button",{type:"button",class:"button w-20 bg-theme-6 text-white mr-2",onClick:t[8]||(t[8]=(...t)=>e.onCancelClick&&e.onCancelClick(...t))}," Batal "),Object(l["h"])("button",{type:"button",class:"button w-20 bg-theme-1 text-white",onClick:t[9]||(t[9]=(...t)=>e.onSaveClick&&e.onSaveClick(...t))},Object(l["N"])(e.isEditPage?"Perbarui":"Simpan"),1)])]),_:1},8,["modal-id","title"])}var s=o("33d8"),r=o("4980");const u=Object(l["l"])(()=>o.e("chunk-2d0b61df").then(o.bind(null,"1c90"))),p=Object(l["l"])(()=>o.e("chunk-2d0cc9c9").then(o.bind(null,"4f56"))),b=Object(l["l"])(()=>o.e("chunk-2d0ddc13").then(o.bind(null,"8379"))),v=Object(l["l"])(()=>o.e("chunk-1fcce625").then(o.bind(null,"e723"))),m=Object(l["l"])(()=>o.e("chunk-2d0de39f").then(o.bind(null,"856b"))),f=Object(l["l"])(()=>o.e("chunk-2d0d3627").then(o.bind(null,"5d13"))),g=Object(l["l"])(()=>o.e("chunk-2bcf108f").then(o.bind(null,"560d"))),y=async()=>o.e("chunk-2d216d75").then(o.bind(null,"c3d3")),h=async()=>o.e("chunk-2d0df461").then(o.bind(null,"88e0"));var j=Object(l["m"])({props:{showFormMateri:{type:Boolean,default:!1},materiId:{type:Number,default:0},materiSlug:{type:String,default:""}},components:{ModalTemplate:u,TextField:p,TextArea:b,SingleImageUpload:v,SingleFileUpload:m,Autocomplete:f,RadioGroup:g},setup(e,{emit:t}){const o="modal-form-materi",n=Object(l["c"])(()=>e.materiId),i=Object(l["c"])(()=>e.materiSlug),a=Object(l["c"])(()=>!!i.value),c=Object(l["c"])(()=>a.value?"Form Edit Materi":"Form Add Materi"),d=[{text:"e-Book",value:"ebook"},{text:"Video",value:"video"}],u=[{text:"Active",value:"1"},{text:"Inactive",value:"0"}],p=()=>{v(),t("update:show-form-materi",!1),t("update:materi-id",0),t("update:materi-slug","")};Object(l["U"])(()=>e.showFormMateri,e=>{e&&s["b"].showModal("#"+o),s["b"].onHideModal("#"+o,p),f()});const b=Object(l["F"])({title:"",banner:{file:"",fileUrl:""},content:{file:"",fileUrl:""},contentVideo:"",types:"ebook",isActive:"0",category:"0",topic:"0"}),v=()=>{b.title="",b.banner={file:"",fileUrl:""},b.content={file:"",fileUrl:""},b.contentVideo="",b.types="ebook",b.isActive="0",b.category="0",b.topic="0"},m=Object(l["G"])([]),f=async()=>{const{getAdminLearningCategories:e}=await h();try{const t=await e(),o=null===t||void 0===t?void 0:t.response;m.value=o.map(e=>({...e,text:e.title,value:e.id.toString()}))}catch(t){console.error("err getCategories ",t,null===t||void 0===t?void 0:t.response)}},g=Object(l["c"])(()=>{var e;const t=b.category,o=m.value.find(({value:e})=>e===t);return(null===o||void 0===o||null===(e=o.topics)||void 0===e?void 0:e.map(e=>({text:null===e||void 0===e?void 0:e.title,value:null===e||void 0===e?void 0:e.id})))||[]});Object(l["U"])(()=>b.category,()=>{const e=g.value;var t;e.length?b.topic=null===(t=e[0])||void 0===t?void 0:t.value:b.topic=""});const j=Object(l["G"])([]),O=async()=>{const{getAdminLearningById:e}=await y();s["b"].gLoading.show();try{var t,o;const i=await e(n.value.toString());await Object(l["s"])();const a=i.response;console.log("resData getDetailMateri ",a),b.title=a.title,b.banner.fileUrl=a.banner,b.types=a.types,"ebook"===a.types&&(b.content.fileUrl=a.content),"video"===a.types&&(b.contentVideo=a.content),b.isActive=a.isActive?"1":"0",b.category=(null===a||void 0===a||null===(t=a.category)||void 0===t?void 0:t.id.toString())||"0",b.topic=(null===a||void 0===a||null===(o=a.topic)||void 0===o?void 0:o.id.toString())||"0",console.log("form ",b)}catch(i){console.log("err response getDetailMateri ",i,null===i||void 0===i?void 0:i.response),s["b"].handleEds(i)}finally{s["b"].gLoading.hide()}};Object(l["U"])(()=>a.value,e=>{e&&O()});const k=()=>s["b"].hideModal("#"+o),w=()=>{console.log("materi ID ",n.value),console.log("materi Slug ",i.value),a.value?x():U()},S=()=>{s["b"].hideModal("#"+o),t("update:refetch",!0)},U=async()=>{const{postAdminLearning:e}=await y();s["b"].gLoading.show();const t=new FormData;t.append("title",b.title),t.append("banner",b.banner.file),"ebook"===b.types&&t.append("content",b.content.file),"video"===b.types&&t.append("content",b.contentVideo),t.append("types",b.types),t.append("isActive","1"===b.isActive?"1":"0"),t.append("category",b.category.toString()),t.append("topic",b.topic.toString());try{await e(t),Object(r["a"])({type:"s",message:"Successfully Created Materi"}).show(),S()}catch(n){var o,l;console.error("err hitAddMateri ",n,null===n||void 0===n?void 0:n.response);const e=null===n||void 0===n||null===(o=n.response)||void 0===o?void 0:o.data,t=null===e||void 0===e||null===(l=e.diagnostic)||void 0===l?void 0:l.message;Object(r["a"])({type:"f",message:t}).show()}finally{s["b"].gLoading.hide()}},x=async()=>{const{putAdminLearning:e}=await y();s["b"].gLoading.show();const t=new FormData;t.append("title",b.title);const o=b.banner.file;o?t.append("banner",o):t.append("banner","");const l=b.content.file;"ebook"===b.types&&l&&t.append("content",b.content.file),"ebook"!==b.types||l||t.append("content",""),"video"===b.types&&t.append("content",b.contentVideo),t.append("types",b.types),t.append("isActive","1"===b.isActive?"1":"0"),t.append("category",b.category.toString()),t.append("topic",b.topic.toString());try{await e(n.value.toString(),t),Object(r["a"])({type:"s",message:"Successfully Updated Materi"}).show(),S()}catch(c){var i,a;console.error("err hitEditMateri ",c,null===c||void 0===c?void 0:c.response);const e=null===c||void 0===c||null===(i=c.response)||void 0===i?void 0:i.data,t=null===e||void 0===e||null===(a=e.diagnostic)||void 0===a?void 0:a.message;Object(r["a"])({type:"f",message:t}).show()}finally{s["b"].gLoading.hide()}};return{modalId:o,isEditPage:a,titleForm:c,filterTypes:d,listStatus:u,form:b,categories:m,topics:j,prettierTopicsFromCategory:g,onCancelClick:k,onSaveClick:w}}}),O=o("6b0d"),k=o.n(O);const w=k()(j,[["render",d]]);t["default"]=w}}]);
//# sourceMappingURL=chunk-2d0a5502.910953ba.js.map